<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Axibase Collector | Collections</title>
    <meta name="description" content="User manual and API reference for Axibase® Time Series Database">
    <link rel="shortcut icon" href="/axibase-collector/favicon.ico">
    
    <link rel="stylesheet" href="/axibase-collector/assets/css/119.styles.919842c1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/axibase-collector/" class="home-link router-link-active"><img src="/axibase-collector/images/axibase_logo.png" class="logo"><span class="site-name can-hide">
      Axibase Collector
    </span></a><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Jobs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/aws.html" class="nav-link">AWS</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/docker.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/file.html" class="nav-link">File</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/http.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/icmp.html" class="nav-link">ICMP</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/jdbc.html" class="nav-link">JDBC</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/jmx.html" class="nav-link">JMX</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/json.html" class="nav-link">JSON</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/kafka.html" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/ovpm.html" class="nav-link">OVPM</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/pi.html" class="nav-link">PI</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/snmp.html" class="nav-link">SNMP</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/socrata.html" class="nav-link">Socrata</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/tcp.html" class="nav-link">TCP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Data Sources</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/jdbc-data-source.html" class="nav-link">Database</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/http-pool.html" class="nav-link">HTTP Pool</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/kafka-consumer.html" class="nav-link">Kafka Consumer</a></li></ul></div></div><div class="nav-item"><a href="/axibase-collector/jobs/examples/" class="nav-link">Examples</a></div><!----></nav><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Jobs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/aws.html" class="nav-link">AWS</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/docker.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/file.html" class="nav-link">File</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/http.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/icmp.html" class="nav-link">ICMP</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/jdbc.html" class="nav-link">JDBC</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/jmx.html" class="nav-link">JMX</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/json.html" class="nav-link">JSON</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/kafka.html" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/ovpm.html" class="nav-link">OVPM</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/pi.html" class="nav-link">PI</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/snmp.html" class="nav-link">SNMP</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/socrata.html" class="nav-link">Socrata</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/tcp.html" class="nav-link">TCP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Data Sources</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/jdbc-data-source.html" class="nav-link">Database</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/http-pool.html" class="nav-link">HTTP Pool</a></li><li class="dropdown-item"><!----><a href="/axibase-collector/jobs/kafka-consumer.html" class="nav-link">Kafka Consumer</a></li></ul></div></div><div class="nav-item"><a href="/axibase-collector/jobs/examples/" class="nav-link">Examples</a></div><!----></nav><ul class="sidebar-links"><li><a href="/axibase-collector/" class="sidebar-link">Axibase Collector</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Installation</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Updating</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Administration</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Job's Configuration</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Automation</span><span class="arrow down"></span></p><ul class="sidebar-group-items"><li><a href="/axibase-collector/collections.html" class="active sidebar-link">Collections</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/axibase-collector/collections.html#item-lists" class="sidebar-link">Item Lists</a></li></ul></li><li><a href="/axibase-collector/functions-freemarker.html" class="sidebar-link">FreeMarker Functions</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="collections"><a href="#collections" aria-hidden="true" class="header-anchor">#</a> Collections</h1><h2 id="item-lists"><a href="#item-lists" aria-hidden="true" class="header-anchor">#</a> Item Lists</h2><p>Item List is a collection of strings which can be iterated to execute repetitive requests (queries) within the same job configuration.</p><p>The list can be defined by specifying items as text (one item per line) or by retrieving them from an external source such as file or script output.</p><p>Items starting with the hash <code>#</code> symbol are treated as comments and are ignored.</p><p>Supported list types:</p><ul><li><a href="#text">TEXT</a></li><li><a href="#file">FILE</a></li><li><a href="#script">SCRIPT</a></li><li><a href="#url">URL</a></li><li><a href="#query">QUERY</a></li><li><a href="#atsd_property">ATSD_PROPERTY</a></li></ul><p>Job types with support for Item List automation:</p><ul><li>FILE</li><li>HTTP</li><li>ICMP</li><li>JSON</li><li>OVPM</li><li>SNMP</li><li>SOCRATA</li><li>TCP</li></ul><h3 id="configuration"><a href="#configuration" aria-hidden="true" class="header-anchor">#</a> Configuration</h3><p>To create a new list, open the <strong>Collections:Item Lists</strong> page, and click <strong>Add</strong>:</p><table><thead><tr><th style="text-align:left"><strong>Field</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>Name</code></td><td style="text-align:left">Item List name.</td></tr><tr><td style="text-align:left"><code>Description</code></td><td style="text-align:left">Item List description.</td></tr><tr><td style="text-align:left"><code>Type</code></td><td style="text-align:left">Method used to retrieve list items. See <a href="#types">types</a>.</td></tr><tr><td style="text-align:left"><code>Discard Duplicates</code></td><td style="text-align:left">Discard items with the same name.<br>If true, the list discards duplicate items regardless of type (TEXT, FILE, SCRIPT).<br>String comparison for duplicate checks is case-sensitive.</td></tr><tr><td style="text-align:left"><code>Items</code>, <code>Path</code>, <code>Command</code>...</td><td style="text-align:left">Type-specific fields to configure the source for reading list items.</td></tr></tbody></table><h3 id="usage"><a href="#usage" aria-hidden="true" class="header-anchor">#</a> Usage</h3><p>Use the <code>${ITEM}</code> placeholder to access the value of the current item in the list while iterating.</p><p>The items retain the original order as specified in the editor or returned by an external source.</p><p>For example, include the <code>${ITEM}</code> placeholder into the Path field in JSON job to query a different URL for each element in the list.</p><p><img src="/axibase-collector/assets/img/item-list.dcea33c8.png" alt="Item List Example"></p><h3 id="functions"><a href="#functions" aria-hidden="true" class="header-anchor">#</a> Functions</h3><p>Item values can be further modified with built-in <a href="/axibase-collector/jobs/placeholders.html#string-functions">string functions</a>.</p><pre class="language-text"><code>${ITEM?function(arguments)}
</code></pre><p>Example: <code>${ITEM?keep_before(&quot;_&quot;)}</code></p><p>Multiple functions can be chained (executed from left to right):</p><pre class="language-text"><code>${ITEM?functionA(arguments)?functionB(arguments)}
</code></pre><p>Example: <code>${ITEM?keep_before(&quot;_&quot;)?replace(&quot;.csv&quot;, &quot;&quot;)}</code></p><h3 id="types"><a href="#types" aria-hidden="true" class="header-anchor">#</a> Types</h3><p>Item Lists may receive items from different sources. Currently the following types are implemented:</p><h4 id="text"><a href="#text" aria-hidden="true" class="header-anchor">#</a> TEXT</h4><p>An Item List which stores strings entered in the <code>Items</code> field on the form.</p><p>List items should be separated by a line break.</p><p><img src="/axibase-collector/assets/img/collection_text_type.4368c071.png" alt="TEXT Type"></p><h4 id="file"><a href="#file" aria-hidden="true" class="header-anchor">#</a> FILE</h4><p>Reads lines from a file on the local filesystem.</p><table><thead><tr><th style="text-align:left"><strong>Field</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>Path</code></td><td style="text-align:left">Absolute path to the text file containing Item List elements</td></tr><tr><td style="text-align:left"><code>Item Filter</code></td><td style="text-align:left">Expression for matching item. This field also supports regex expression, for example: REGEXP(expression).</td></tr></tbody></table><p>If the file is not found, an empty list is returned. List items in the file should be separated with a line break.</p><p><img src="/axibase-collector/assets/img/collection_file_type.70e4ed4f.png" alt="FILE Type"></p><p>Exclude items which end with <code>axibase.com</code>:</p><p><img src="/axibase-collector/assets/img/collection_file_type_filtered.574244fb.png" alt="FILE Type"></p><h4 id="script"><a href="#script" aria-hidden="true" class="header-anchor">#</a> SCRIPT</h4><p>Executes a script specified in the <code>Command</code> field and reads lines from a standard output as list items.</p><table><thead><tr><th style="text-align:left"><strong>Field</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>Path to the Script</code></td><td style="text-align:left">Relative path to a script file returning Item List elements.<br>Scripts should be located in $AXIBASE_COLLECTOR_HOME/conf/scripts directory.</td></tr><tr><td style="text-align:left"><code>Command</code></td><td style="text-align:left">A list of commands returning Item List elements. During execution a temporary file is created in the directory $AXIBASE_COLLECTOR_HOME/conf/scripts, also this directory is used as working directory.<br>It is recommended to specify a command interpreter by providing a shebang on the first line, e.g. #!/usr/bin/env bash.<br>You must provide the setting 'script.text.execute.allow=true' in server.properties file in order to be able to use this feature.</td></tr></tbody></table><p>The <code>Command</code> field should start with the script file name (absolute path not supported) and optional script arguments.</p><p>The script should print items separated by line breaks to 'stdout'.</p><p><img src="/axibase-collector/assets/img/collection_script_type.24c52875.png" alt="SCRIPT Type"></p><ul><li><strong>Example</strong></li></ul><p>The directory <code>/tmp/report/csv</code> contains CSV files. The Item List should contain a collection of file name prefixes before the underscore symbol.</p><pre class="language-text"><code>ent-1_file-1.csv
ent-1_file-2.csv
ent-1_file-3.csv
ent-2_file-1.csv
ent-2_file-2.csv
ent-3_file-3.csv
</code></pre><pre class="language-text"><code>nano prefix.sh
</code></pre><pre class="language-text"><code>#!/usr/bin/env bash
dir=&quot;$1/*&quot;
for file in $dir; do
    if [[ -f $file &amp;&amp;  $file == *&quot;_&quot;* ]]; then
        filename=${file##*/}
        b=${filename%_*}
        echo -e &quot;$b&quot;
    fi
done
</code></pre><pre class="language-text"><code>chmod a+x prefix.sh
prefix.sh /tmp/report/csv

ent-1
ent-1
ent-1
ent-2
ent-2
ent-3
</code></pre><h4 id="url"><a href="#url" aria-hidden="true" class="header-anchor">#</a> URL</h4><p>Reads lines from a remote file/page.</p><table><thead><tr><th style="text-align:left"><strong>Field</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>HTTP Pool</code></td><td style="text-align:left">HTTP Pool specifying connection properties to ATSD from which the records will be retrieved.</td></tr><tr><td style="text-align:left"><code>Path</code></td><td style="text-align:left">HTTP(s) Path to file. If HTTP Pool is enabled, the path should be relative. Otherwise the Path should be a full URI including the protocol, host, port and path.</td></tr><tr><td style="text-align:left"><code>Content Format</code></td><td style="text-align:left">Content format in the file. Supported formats: <code>MULTILINE_TEXT</code> and <code>JSON</code>.</td></tr><tr><td style="text-align:left"><code>Item Filter</code></td><td style="text-align:left">Expression for matching item. This field also supports regex expression, for example: REGEXP(expression).</td></tr><tr><td style="text-align:left"><code>JSON Path</code></td><td style="text-align:left">JSON Path expression to match a list of items in the JSON document.</td></tr><tr><td style="text-align:left"><code>Separator</code></td><td style="text-align:left">Separator used when concatenating multiple field values.</td></tr></tbody></table><p>If the file is not found, an empty list is returned. List items should be separated with a line break when the <code>MULTILINE_TEXT</code> format is selected.</p><p>Examples:</p><ul><li><a href="#example-with-multiline-text-content">MULTILINE_TEXT</a></li><li><a href="#example-with-json-content">JSON</a></li></ul><h5 id="example-with-multiline-text-content"><a href="#example-with-multiline-text-content" aria-hidden="true" class="header-anchor">#</a> Example with <code>MULTILINE_TEXT</code> content</h5><p><img src="/axibase-collector/assets/img/collection_url_type.da5dae60.png" alt="URL Type"></p><ul><li><em><strong>Example</strong></em></li></ul><pre class="language-text"><code>URL = http://m.uploadedit.com/bbtc/1502281772577.txt
</code></pre><p>Remote file content:</p><pre class="language-text"><code>#ID
2128406
2513822
2513836
2513838
2513839
</code></pre><p>result:</p><pre class="language-text"><code>2128406
2513822
2513836
2513838
2513839
</code></pre><h5 id="example-with-json-content"><a href="#example-with-json-content" aria-hidden="true" class="header-anchor">#</a> Example with <code>JSON</code> content</h5><p><img src="/axibase-collector/assets/img/collection_url_type_json.6a921ccd.png" alt="URL Type JSON"></p><h4 id="query"><a href="#query" aria-hidden="true" class="header-anchor">#</a> QUERY</h4><p>Selects data from a database with a SELECT query.</p><table><thead><tr><th style="text-align:left"><strong>Field</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>Database</code></td><td style="text-align:left">Database from which the item list records will be selected.</td></tr><tr><td style="text-align:left"><code>Query</code></td><td style="text-align:left">SELECT query for retrieving item list elements. Values contained in multiple columns are concatenated using specified separator.</td></tr><tr><td style="text-align:left"><code>Separator</code></td><td style="text-align:left">Separator used when concatenating multiple column values.</td></tr></tbody></table><p>Each item is created by concatenating values from <strong>all</strong> columns in a given row separated by the specified token.</p><p>If the result set is empty, an empty list is returned.</p><p><img src="/axibase-collector/assets/img/collection_query_type.35776ab2.png" alt="QUERY Type"></p><h4 id="atsd-property"><a href="#atsd-property" aria-hidden="true" class="header-anchor">#</a> ATSD_PROPERTY</h4><p>Requests a list of property records from ATSD with the <a href="https://axibase.com/docs/atsd/api/data/properties/query.html" target="_blank" rel="noopener noreferrer">property query</a> method.</p><table><thead><tr><th style="text-align:left"><strong>Field</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:left"><code>HTTP Pool</code></td><td style="text-align:left">HTTP Pool specifying connection properties to ATSD from which the records will be retrieved.</td></tr><tr><td style="text-align:left"><code>Property Type</code></td><td style="text-align:left">Property type to be retrieved.</td></tr><tr><td style="text-align:left"><code>Entity</code></td><td style="text-align:left">Entity name or pattern containing * as a wildcard.</td></tr><tr><td style="text-align:left"><code>Entity Group</code></td><td style="text-align:left">Entity group name to filter records for entities that are members of this group.</td></tr><tr><td style="text-align:left"><code>Entity Expression</code></td><td style="text-align:left">An expression to filter entities: all or a subset matched with Entity/Entity Group fields.</td></tr><tr><td style="text-align:left"><code>Key/Tag Filter</code></td><td style="text-align:left">Expression for matching property records with specified keys or tags.</td></tr><tr><td style="text-align:left"><code>Keys/Tags</code></td><td style="text-align:left">List of property keys and tags to be concatenated into a line using separator specified in Separator field. All fields are concatenated, if this field is set to *.</td></tr><tr><td style="text-align:left"><code>Entity Tags</code></td><td style="text-align:left">List of entity tags to be concatenated into a line using separator specified in Separator field. All fields are concatenated, if this field is set to *.</td></tr><tr><td style="text-align:left"><code>Separator</code></td><td style="text-align:left">Separator used when concatenating multiple key/tag values.</td></tr></tbody></table><p>Each item is created by concatenating field values (Keys/Tags + Entity Tags) separated by the specified token.</p><p>If no property records are found, an empty list is returned.</p><p><img src="/axibase-collector/assets/img/collection_atsd_property_type.f8230d35.png" alt="ATSD_PROPERTY Type"></p></div><div class="content edit-link"><a href="https://github.com/axibase/axibase-collector/edit/master//collections.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="content page-nav"><p class="inner"><span class="prev">
        ← <a href="/axibase-collector/scheduling.html" class="prev">
          Scheduling
        </a></span><span class="next"><a href="/axibase-collector/functions-freemarker.html">
          FreeMarker Functions
        </a> →
      </span></p></div></div></div></div>
    <script src="/axibase-collector/assets/js/116.014f69cb.js" defer></script><script src="/axibase-collector/assets/js/app.7b3887e4.js" defer></script>
  </body>
</html>
