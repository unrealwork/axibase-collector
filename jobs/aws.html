<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Collector | AWS Job</title>
    <meta name="description" content="User manual and API reference for AxibaseÂ® Time Series Database">
    <link rel="shortcut icon" href="/docs/axibase-collector/favicon.ico">
    
    <link rel="stylesheet" href="/docs/axibase-collector/assets/css/117.styles.518f94bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/docs/axibase-collector/" class="home-link router-link-active"><img src="/docs/axibase-collector/images/axibase_logo_green.gif" class="logo"><span class="site-name can-hide">
      Collector
    </span></a><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Jobs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/aws.html" class="nav-link router-link-exact-active router-link-active">AWS</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/docker.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/file.html" class="nav-link">File</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/http.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/icmp.html" class="nav-link">ICMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc.html" class="nav-link">JDBC</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jmx.html" class="nav-link">JMX</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/json.html" class="nav-link">JSON</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka.html" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/ovpm.html" class="nav-link">OVPM</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/pi.html" class="nav-link">PI</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/snmp.html" class="nav-link">SNMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/socrata.html" class="nav-link">Socrata</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/tcp.html" class="nav-link">TCP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Data Sources</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc-data-source.html" class="nav-link">Database</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/atsd-server-connection.html#http-pool" class="nav-link">HTTP Pool</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka-consumer.html" class="nav-link">Kafka Consumer</a></li></ul></div></div><div class="nav-item"><a href="/docs/axibase-collector/#examples" class="nav-link">Examples</a></div><!----></nav><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Jobs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/aws.html" class="nav-link router-link-exact-active router-link-active">AWS</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/docker.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/file.html" class="nav-link">File</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/http.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/icmp.html" class="nav-link">ICMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc.html" class="nav-link">JDBC</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jmx.html" class="nav-link">JMX</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/json.html" class="nav-link">JSON</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka.html" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/ovpm.html" class="nav-link">OVPM</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/pi.html" class="nav-link">PI</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/snmp.html" class="nav-link">SNMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/socrata.html" class="nav-link">Socrata</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/tcp.html" class="nav-link">TCP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Data Sources</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc-data-source.html" class="nav-link">Database</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/atsd-server-connection.html#http-pool" class="nav-link">HTTP Pool</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka-consumer.html" class="nav-link">Kafka Consumer</a></li></ul></div></div><div class="nav-item"><a href="/docs/axibase-collector/#examples" class="nav-link">Examples</a></div><!----></nav><ul class="sidebar-links"><li><a href="/docs/axibase-collector/jobs/aws.html" class="active sidebar-link">AWS Job</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#supported-namespaces" class="sidebar-link">Supported Namespaces</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#schema" class="sidebar-link">Schema</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#configuration-settings" class="sidebar-link">Configuration Settings</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#configuration-steps" class="sidebar-link">Configuration Steps</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#validation" class="sidebar-link">Validation</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#sample-dashboards" class="sidebar-link">Sample Dashboards</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#configuration-example" class="sidebar-link">Configuration Example</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#sample-aws-ec2-cloudwatch-metrics" class="sidebar-link">Sample AWS/EC2 CloudWatch Metrics</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#aws-cloudwatch-api-fees" class="sidebar-link">AWS CloudWatch API Fees</a></li><li class="sidebar-sub-header"><a href="/docs/axibase-collector/jobs/aws.html#namespace-dimensions" class="sidebar-link">Namespace Dimensions</a></li></ul></li></ul></div><div class="page"><div class="content"><h1 id="aws-job"><a href="#aws-job" aria-hidden="true" class="header-anchor">#</a> AWS Job</h1><h2 id="overview"><a href="#overview" aria-hidden="true" class="header-anchor">#</a> Overview</h2><p>AWS job allows you to copy <a href="https://aws.amazon.com/cloudwatch/" target="_blank" rel="noopener noreferrer">Amazon Web Services CloudWatch</a> statistics into Axibase Time Series Database for long-term retention, reporting, and visualization.</p><p>Refer to <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/CW_Support_For_AWS.html" target="_blank" rel="noopener noreferrer">AWS documentation</a> for a complete list of available metrics.</p><p>The AWS job stores markers for each CloudWatch metric so that API requests are incremental and load only the most recent data. These markers allow the job to build optimized queries and to avoid data gaps in case of network outages.</p><p>Each job can be configured to execute multiple configurations in order to retrieve metrics from different <a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#cw_region" target="_blank" rel="noopener noreferrer">regions</a>. The configurations are processed sequentially within each job iteration.</p><p>When an AWS job is started for the first time, it will load available historical data from CloudWatch, available for up to 2 weeks.</p><h2 id="supported-namespaces"><a href="#supported-namespaces" aria-hidden="true" class="header-anchor">#</a> Supported Namespaces</h2><p>Each AWS <a href="http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/aws-namespaces.html" target="_blank" rel="noopener noreferrer">namespace</a> provides a set of metrics available for resources of a particular type.</p><p>You can configure the AWS job to collect metrics for all or a subset of namespaces. To minimize the number of API queries, choose to collect data only for AWS services that you're actually using.</p><p>Available namespaces:</p><p><img src="/docs/axibase-collector/assets/img/aws-namespaces.0cd155ea.png" alt></p><h2 id="schema"><a href="#schema" aria-hidden="true" class="header-anchor">#</a> Schema</h2><p>The CloudWatch metrics are stored in ATSD using the following naming convention:</p><pre class="language-text"><code>{namespace}.{metric-name}.{statistic-name}
</code></pre><p>The composite metric name is normalized by replacing slash and whitespace symbols with underscores.</p><pre class="language-text"><code>aws_ebs.volumeidletime.maximum
</code></pre><p>For each metric, the AWS job retrieves the following period statistics:</p><ul><li>average</li><li>minimum</li><li>maximum</li><li>sum</li><li>sample count</li></ul><p>The AWS statistics are stored in ATSD as metrics which means that ATSD can compute aggregate statistics on top of AWS statistics.</p><p>For example, the <code>AWS/Billing Estimated Charges</code> metric is stored as 5 metrics:</p><ul><li><code>aws_billing.estimatedcharges.minimum</code></li><li><code>aws_billing.estimatedcharges.maximum</code></li><li><code>aws_billing.estimatedcharges.sum</code></li><li><code>aws_billing.estimatedcharges.average</code></li><li><code>aws_billing.estimatedcharges.samplecount</code></li></ul><p>The number of metrics within each namespace varies greatly. For AWS/EC2 the list consists of 15+ <a href="#aws-ec2-metrics">metrics</a>.</p><p>The job assigns each metric to an entity which is determined based on the <a href="#namespace-dimensions">primary dimension</a>.</p><h2 id="configuration-settings"><a href="#configuration-settings" aria-hidden="true" class="header-anchor">#</a> Configuration Settings</h2><table><thead><tr><th style="text-align:left"><strong>Field</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:left">Name</td><td style="text-align:left">Configuration name.</td></tr><tr><td style="text-align:left">HTTP Pool</td><td style="text-align:left">Pool of https connections to execute requests against the specified CloudWatch endpoint. The pool can be left empty.</td></tr><tr><td style="text-align:left">Endpoint</td><td style="text-align:left"><a href="http://docs.aws.amazon.com/general/latest/gr/rande.html#cw_region" target="_blank" rel="noopener noreferrer">CloudWatch Endpoint</a> URL.</td></tr><tr><td style="text-align:left">Access key id</td><td style="text-align:left">Access key. See <a href="http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSGettingStartedGuide/AWSCredentials.html" target="_blank" rel="noopener noreferrer">Getting Your Access Key ID and Secret Access Key</a>.</td></tr><tr><td style="text-align:left">Secret access key</td><td style="text-align:left">Secret access key.</td></tr><tr><td style="text-align:left">Namespaces</td><td style="text-align:left">CloudWatch metric namespaces enabled for collection.</td></tr><tr><td style="text-align:left">Collect Status</td><td style="text-align:left">Collect status check metrics such as <br><code>StatusCheckFailed</code>, <code>StatusCheckFailed_Instance</code>, <code>StatusCheckFailed_System</code></td></tr><tr><td style="text-align:left">Property Refresh <br> Interval, minutes</td><td style="text-align:left">Interval for loading resource attributes.</td></tr></tbody></table><h2 id="configuration-steps"><a href="#configuration-steps" aria-hidden="true" class="header-anchor">#</a> Configuration Steps</h2><ul><li>Create a read-only <a href="/docs/axibase-collector/jobs/aws-iam.html">IAM account</a> for querying CloudWatch statistics.</li><li>Open the <strong>Jobs:Add Job:Use Wizard</strong> page.</li><li>Specify access and secret keys.</li><li>Select AWS regions from which you want to collect data. <br>The wizard will create a separate AWS configuration for each region within the same job.</li><li>Validate the credentials and save the job if there are no errors.</li></ul><p><img src="/docs/axibase-collector/assets/img/aws-wizard-validate.2f42fa07.png" alt></p><ul><li>Select one of the created configurations and click Test.</li></ul><p><img src="/docs/axibase-collector/assets/img/aws-test.15ae5119.png" alt></p><ul><li>To view available metrics for a particular namespace, uncheck all namespaces except one and click Test.</li></ul><h2 id="validation"><a href="#validation" aria-hidden="true" class="header-anchor">#</a> Validation</h2><ul><li>Open the AWS job page and set the schedule to <code>R 0/5 * * * ?</code> to execute the job every 5 minutes with random seconds.</li><li>On the AWS Jobs list page, check that Items Read and Commands Sent are greater than 0.</li><li>Login into ATSD. Open the <strong>Metrics</strong> tab and review available metrics by typing <code>aws</code> into the Name Mask.<br>Note that it may take the AWS job a while to load backlogged historical data for all metrics after the job was created.</li><li>Open the Entities tab and locate one of AWS EC2 instances. Click on Portal links to access pre-defined AWS portals.</li></ul><p><img src="/docs/axibase-collector/assets/img/metric_list.62df0375.png" alt></p><h2 id="sample-dashboards"><a href="#sample-dashboards" aria-hidden="true" class="header-anchor">#</a> Sample Dashboards</h2><ul><li><a href="https://apps.axibase.com/chartlab/0aa34311" target="_blank" rel="noopener noreferrer">EC2</a></li></ul><p><img src="/docs/axibase-collector/assets/img/ec2.cecee2c4.png" alt></p><ul><li><a href="https://apps.axibase.com/chartlab/e8977b4a" target="_blank" rel="noopener noreferrer">EBS</a></li></ul><p><img src="/docs/axibase-collector/assets/img/ebs.785f0915.png" alt></p><h2 id="configuration-example"><a href="#configuration-example" aria-hidden="true" class="header-anchor">#</a> Configuration Example</h2><p><img src="https://axibase.com/wp-content/uploads/2016/03/aws_config.png" alt></p><h2 id="sample-aws-ec2-cloudwatch-metrics"><a href="#sample-aws-ec2-cloudwatch-metrics" aria-hidden="true" class="header-anchor">#</a> Sample AWS/EC2 CloudWatch Metrics</h2><ul><li>aws_ec2.cpucreditbalance</li><li>aws_ec2.cpucreditusage</li><li>aws_ec2.cpuutilization</li><li>aws_ec2.diskreadbytes</li><li>aws_ec2.diskreadops</li><li>aws_ec2.diskwritebytes</li><li>aws_ec2.diskwriteops</li><li>aws_ec2.networkin</li><li>aws_ec2.networkout</li><li>aws_ec2.networkpacketsin</li><li>aws_ec2.networkpacketsout</li><li>aws_ec2.statuscheckfailed</li><li>aws_ec2.statuscheckfailed_instance</li><li>aws_ec2.statuscheckfailed_system</li></ul><h2 id="aws-cloudwatch-api-fees"><a href="#aws-cloudwatch-api-fees" aria-hidden="true" class="header-anchor">#</a> AWS CloudWatch API Fees</h2><p>AWS applies <a href="https://aws.amazon.com/cloudwatch/pricing/" target="_blank" rel="noopener noreferrer">usage charges</a> for CloudWatch API requests with free entitlement available on a monthly basis.</p><p>An extra fee is charged for detailed monitoring, as well as for custom metrics. The detailed monitoring provides <code>1-minute</code> period granularity and a lower delay, typically 1 or 2 minutes, whereas the basic monitoring can have a delay between 5 and 10 minutes.</p><h2 id="namespace-dimensions"><a href="#namespace-dimensions" aria-hidden="true" class="header-anchor">#</a> Namespace Dimensions</h2><p>The primary dimension determines entity name in ATSD.</p><table><thead><tr><th><strong>Namespace</strong></th><th><strong>Primary Dimension</strong></th></tr></thead><tbody><tr><td>AWS/Route53</td><td>HealthCheckId</td></tr><tr><td>AWS/ApiGateway</td><td>ApiName</td></tr><tr><td>AWS/AppStream</td><td>Fleet</td></tr><tr><td>AWS/AutoScaling</td><td>AutoScalingGroupName</td></tr><tr><td>AWS/Billing</td><td>ServiceName</td></tr><tr><td>AWS//CloudFront</td><td>DistributionId</td></tr><tr><td>AWS/CloudSearch</td><td>ClientId</td></tr><tr><td>CWAgent</td><td>InstanceId</td></tr><tr><td>AWS/Events</td><td>RuleName</td></tr><tr><td>AWS/Logs</td><td>LogGroupName</td></tr><tr><td>AWS/Connect</td><td>InstanceId</td></tr><tr><td>AWS/DMS --&gt; extract <em>id</em> or <em>arn</em></td><td></td></tr><tr><td>AWS/DX</td><td>ConnectionId</td></tr><tr><td>AWS/DynamoDB</td><td>TableName</td></tr><tr><td>AWS/EC2</td><td>InstanceId</td></tr><tr><td>AWS/EC2Spot</td><td>AvailabilityZone</td></tr><tr><td>AWS/ECS</td><td>ClusterName</td></tr><tr><td>AWS/ElasticBeanstalk</td><td>InstanceId</td></tr><tr><td>AWS/EBS</td><td>VolumeId</td></tr><tr><td>AWS/EFS</td><td>FileSystemId</td></tr><tr><td>AWS/ELB</td><td>LoadBalancerName</td></tr><tr><td>AWS/ApplicationELB</td><td>LoadBalancerName</td></tr><tr><td>AWS/NetworkELB</td><td>LoadBalancer</td></tr><tr><td>AWS/ElasticTranscoder</td><td>PipelineId</td></tr><tr><td>AWS/ElastiCache</td><td>CacheClusterId</td></tr><tr><td>AWS/ES</td><td>ClientId</td></tr><tr><td>AWS/ElasticMapReduce</td><td>JobId</td></tr><tr><td>AWS/GameLift</td><td>FleetId</td></tr><tr><td>AWS/Inspector</td><td>???</td></tr><tr><td>AWS/IoT</td><td>RuleName</td></tr><tr><td>AWS/KMS</td><td>KeyId</td></tr><tr><td>AWS/KinesisAnalytics</td><td>Flow</td></tr><tr><td>AWS/Firehose</td><td>DeliveryStreamName</td></tr><tr><td>AWS/Kinesis</td><td>StreamName</td></tr><tr><td>AWS/KinesisVideo</td><td>StreamName</td></tr><tr><td>AWS/Lambda</td><td>FunctionName</td></tr><tr><td>AWS/Lex</td><td>BotName</td></tr><tr><td>AWS/ML</td><td>MLModelId</td></tr><tr><td>AWS/OpsWorks</td><td>InstanceId</td></tr><tr><td>AWS/Polly</td><td>Operation</td></tr><tr><td>AWS/Redshift</td><td>NodeID</td></tr><tr><td>AWS/RDS</td><td>DBInstanceIdentifier</td></tr><tr><td>AWS/Route53</td><td>HealthCheckId</td></tr><tr><td>AWS/SageMaker</td><td>Host</td></tr><tr><td>AWS/DDoSProtection</td><td></td></tr><tr><td>AWS/SES</td><td></td></tr><tr><td>AWS/SNS</td><td>Application</td></tr><tr><td>AWS/SQS</td><td>QueueName</td></tr><tr><td>AWS/S3</td><td>BucketName</td></tr><tr><td>AWS/SWF</td><td>Domain</td></tr><tr><td>AWS/States</td><td>*arn</td></tr><tr><td>AWS/StorageGateway</td><td>GatewayName</td></tr><tr><td>AWS/NATGateway</td><td>NatGatewayId</td></tr><tr><td>AWS/VPN</td><td>VpnId</td></tr><tr><td>WAF</td><td>Rule</td></tr><tr><td>AWS/WorkSpaces</td><td>WorkspaceId</td></tr><tr><td>AWS/AmazonMQ</td><td>Topic</td></tr><tr><td>AWS/TrustedAdvisor</td><td>ServiceName</td></tr></tbody></table></div><div class="content edit-link"><a href="https://github.com/axibase/axibase-collector/edit/master//jobs/aws.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div></div></div>
    <script src="/docs/axibase-collector/assets/js/101.f4b602af.js" defer></script><script src="/docs/axibase-collector/assets/js/app.2470ced7.js" defer></script>
  </body>
</html>
