(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{218:function(t,e,a){t.exports=a.p+"assets/img/ebs.785f0915.png"},219:function(t,e,a){t.exports=a.p+"assets/img/ec2.cecee2c4.png"},220:function(t,e,a){t.exports=a.p+"assets/img/metric_list.62df0375.png"},221:function(t,e,a){t.exports=a.p+"assets/img/aws-test.15ae5119.png"},222:function(t,e,a){t.exports=a.p+"assets/img/aws-wizard-validate.2f42fa07.png"},223:function(t,e,a){t.exports=a.p+"assets/img/aws-namespaces.0cd155ea.png"},249:function(t,e,a){"use strict";a.r(e);var s=[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{attrs:{id:"aws-job"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aws-job","aria-hidden":"true"}},[this._v("#")]),this._v(" AWS Job")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"overview"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#overview","aria-hidden":"true"}},[this._v("#")]),this._v(" Overview")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("AWS job allows you to copy "),e("a",{attrs:{href:"https://aws.amazon.com/cloudwatch/",target:"_blank",rel:"noopener noreferrer"}},[this._v("Amazon Web Services CloudWatch")]),this._v(" statistics into Axibase Time Series Database for long-term retention, reporting, and visualization.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Refer to "),e("a",{attrs:{href:"http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/CW_Support_For_AWS.html",target:"_blank",rel:"noopener noreferrer"}},[this._v("AWS documentation")]),this._v(" for a complete list of available metrics.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Each job can be configured to execute multiple configurations in order to retrieve metrics from different "),e("a",{attrs:{href:"http://docs.aws.amazon.com/general/latest/gr/rande.html#cw_region",target:"_blank",rel:"noopener noreferrer"}},[this._v("regions")]),this._v(". The configurations are processed sequentially within each job iteration.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"supported-namespaces"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#supported-namespaces","aria-hidden":"true"}},[this._v("#")]),this._v(" Supported Namespaces")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Each AWS "),e("a",{attrs:{href:"http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/aws-namespaces.html",target:"_blank",rel:"noopener noreferrer"}},[this._v("namespace")]),this._v(" provides a set of metrics available for resources of a particular type.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:a(223),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"schema"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#schema","aria-hidden":"true"}},[this._v("#")]),this._v(" Schema")])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("{namespace}.{metric-name}.{statistic-name}\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[this._v("aws_ebs.volumeidletime.maximum\n")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("average")]),e("li",[this._v("minimum")]),e("li",[this._v("maximum")]),e("li",[this._v("sum")]),e("li",[this._v("sample count")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("For example, the "),e("code",[this._v("AWS/Billing Estimated Charges")]),this._v(" metric is stored as 5 metrics:")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("code",[this._v("aws_billing.estimatedcharges.minimum")])]),e("li",[e("code",[this._v("aws_billing.estimatedcharges.maximum")])]),e("li",[e("code",[this._v("aws_billing.estimatedcharges.sum")])]),e("li",[e("code",[this._v("aws_billing.estimatedcharges.average")])]),e("li",[e("code",[this._v("aws_billing.estimatedcharges.samplecount")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The number of metrics within each namespace varies greatly. For AWS/EC2 the list consists of 15+ "),e("a",{attrs:{href:"#aws-ec2-metrics"}},[this._v("metrics")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("The job assigns each metric to an entity which is determined based on the "),e("a",{attrs:{href:"#namespace-dimensions"}},[this._v("primary dimension")]),this._v(".")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"configuration-settings"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration-settings","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration Settings")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[a("strong",[t._v("Field")])]),a("th",{staticStyle:{"text-align":"left"}},[a("strong",[t._v("Description")])])])]),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Name")]),a("td",{staticStyle:{"text-align":"left"}},[t._v("Configuration name.")])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("HTTP Pool")]),a("td",{staticStyle:{"text-align":"left"}},[t._v("Pool of https connections to execute requests against the specified CloudWatch endpoint. The pool can be left empty.")])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Endpoint")]),a("td",{staticStyle:{"text-align":"left"}},[a("a",{attrs:{href:"http://docs.aws.amazon.com/general/latest/gr/rande.html#cw_region",target:"_blank",rel:"noopener noreferrer"}},[t._v("CloudWatch Endpoint")]),t._v(" URL.")])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Access key id")]),a("td",{staticStyle:{"text-align":"left"}},[t._v("Access key. See "),a("a",{attrs:{href:"http://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSGettingStartedGuide/AWSCredentials.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Getting Your Access Key ID and Secret Access Key")]),t._v(".")])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Secret access key")]),a("td",{staticStyle:{"text-align":"left"}},[t._v("Secret access key.")])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Namespaces")]),a("td",{staticStyle:{"text-align":"left"}},[t._v("CloudWatch metric namespaces enabled for collection.")])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Collect Status")]),a("td",{staticStyle:{"text-align":"left"}},[t._v("Collect status check metrics such as "),a("br"),a("code",[t._v("StatusCheckFailed")]),t._v(", "),a("code",[t._v("StatusCheckFailed_Instance")]),t._v(", "),a("code",[t._v("StatusCheckFailed_System")])])]),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("Property Refresh "),a("br"),t._v(" Interval, minutes")]),a("td",{staticStyle:{"text-align":"left"}},[t._v("Interval for loading resource attributes.")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"configuration-steps"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration-steps","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration Steps")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("Open the "),e("strong",[this._v("Jobs:Add Job:Use Wizard")]),this._v(" page.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("li",[this._v("Select AWS regions from which you want to collect data. "),e("br"),this._v("The wizard will create a separate AWS configuration for each region within the same job.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:a(222),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Select one of the created configurations and click Test.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:a(221),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("To view available metrics for a particular namespace, uncheck all namespaces except one and click Test.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"validation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#validation","aria-hidden":"true"}},[this._v("#")]),this._v(" Validation")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("Open the AWS job page and set the schedule to "),a("code",[t._v("R 0/5 * * * ?")]),t._v(" to execute the job every 5 minutes with random seconds.")]),a("li",[t._v("On the AWS Jobs list page, check that Items Read and Commands Sent are greater than 0.")]),a("li",[t._v("Login into ATSD. Open the "),a("strong",[t._v("Metrics")]),t._v(" tab and review available metrics by typing "),a("code",[t._v("aws")]),t._v(" into the Name Mask."),a("br"),t._v("Note that it may take the AWS job a while to load backlogged historical data for all metrics after the job was created.")]),a("li",[t._v("Open the Entities tab and locate one of AWS EC2 instances. Click on Portal links to access pre-defined AWS portals.")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:a(220),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"sample-dashboards"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sample-dashboards","aria-hidden":"true"}},[this._v("#")]),this._v(" Sample Dashboards")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"https://apps.axibase.com/chartlab/0aa34311",target:"_blank",rel:"noopener noreferrer"}},[this._v("EC2")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:a(219),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[e("a",{attrs:{href:"https://apps.axibase.com/chartlab/e8977b4a",target:"_blank",rel:"noopener noreferrer"}},[this._v("EBS")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:a(218),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"configuration-example"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration-example","aria-hidden":"true"}},[this._v("#")]),this._v(" Configuration Example")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("img",{attrs:{src:"https://axibase.com/wp-content/uploads/2016/03/aws_config.png",alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"sample-aws-ec2-cloudwatch-metrics"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#sample-aws-ec2-cloudwatch-metrics","aria-hidden":"true"}},[this._v("#")]),this._v(" Sample AWS/EC2 CloudWatch Metrics")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",[a("li",[t._v("aws_ec2.cpucreditbalance")]),a("li",[t._v("aws_ec2.cpucreditusage")]),a("li",[t._v("aws_ec2.cpuutilization")]),a("li",[t._v("aws_ec2.diskreadbytes")]),a("li",[t._v("aws_ec2.diskreadops")]),a("li",[t._v("aws_ec2.diskwritebytes")]),a("li",[t._v("aws_ec2.diskwriteops")]),a("li",[t._v("aws_ec2.networkin")]),a("li",[t._v("aws_ec2.networkout")]),a("li",[t._v("aws_ec2.networkpacketsin")]),a("li",[t._v("aws_ec2.networkpacketsout")]),a("li",[t._v("aws_ec2.statuscheckfailed")]),a("li",[t._v("aws_ec2.statuscheckfailed_instance")]),a("li",[t._v("aws_ec2.statuscheckfailed_system")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"aws-cloudwatch-api-fees"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#aws-cloudwatch-api-fees","aria-hidden":"true"}},[this._v("#")]),this._v(" AWS CloudWatch API Fees")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("AWS applies "),e("a",{attrs:{href:"https://aws.amazon.com/cloudwatch/pricing/",target:"_blank",rel:"noopener noreferrer"}},[this._v("usage charges")]),this._v(" for CloudWatch API requests with free entitlement available on a monthly basis.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("An extra fee is charged for detailed monitoring, as well as for custom metrics. The detailed monitoring provides "),e("code",[this._v("1-minute")]),this._v(" period granularity and a lower delay, typically 1 or 2 minutes, whereas the basic monitoring can have a delay between 5 and 10 minutes.")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"namespace-dimensions"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#namespace-dimensions","aria-hidden":"true"}},[this._v("#")]),this._v(" Namespace Dimensions")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",[a("thead",[a("tr",[a("th",[a("strong",[t._v("Namespace")])]),a("th",[a("strong",[t._v("Primary Dimension")])])])]),a("tbody",[a("tr",[a("td",[t._v("AWS/Route53")]),a("td",[t._v("HealthCheckId")])]),a("tr",[a("td",[t._v("AWS/ApiGateway")]),a("td",[t._v("ApiName")])]),a("tr",[a("td",[t._v("AWS/AppStream")]),a("td",[t._v("Fleet")])]),a("tr",[a("td",[t._v("AWS/AutoScaling")]),a("td",[t._v("AutoScalingGroupName")])]),a("tr",[a("td",[t._v("AWS/Billing")]),a("td",[t._v("ServiceName")])]),a("tr",[a("td",[t._v("AWS//CloudFront")]),a("td",[t._v("DistributionId")])]),a("tr",[a("td",[t._v("AWS/CloudSearch")]),a("td",[t._v("ClientId")])]),a("tr",[a("td",[t._v("CWAgent")]),a("td",[t._v("InstanceId")])]),a("tr",[a("td",[t._v("AWS/Events")]),a("td",[t._v("RuleName")])]),a("tr",[a("td",[t._v("AWS/Logs")]),a("td",[t._v("LogGroupName")])]),a("tr",[a("td",[t._v("AWS/Connect")]),a("td",[t._v("InstanceId")])]),a("tr",[a("td",[t._v("AWS/DMS --\x3e extract "),a("em",[t._v("id")]),t._v(" or "),a("em",[t._v("arn")])]),a("td")]),a("tr",[a("td",[t._v("AWS/DX")]),a("td",[t._v("ConnectionId")])]),a("tr",[a("td",[t._v("AWS/DynamoDB")]),a("td",[t._v("TableName")])]),a("tr",[a("td",[t._v("AWS/EC2")]),a("td",[t._v("InstanceId")])]),a("tr",[a("td",[t._v("AWS/EC2Spot")]),a("td",[t._v("AvailabilityZone")])]),a("tr",[a("td",[t._v("AWS/ECS")]),a("td",[t._v("ClusterName")])]),a("tr",[a("td",[t._v("AWS/ElasticBeanstalk")]),a("td",[t._v("InstanceId")])]),a("tr",[a("td",[t._v("AWS/EBS")]),a("td",[t._v("VolumeId")])]),a("tr",[a("td",[t._v("AWS/EFS")]),a("td",[t._v("FileSystemId")])]),a("tr",[a("td",[t._v("AWS/ELB")]),a("td",[t._v("LoadBalancerName")])]),a("tr",[a("td",[t._v("AWS/ApplicationELB")]),a("td",[t._v("LoadBalancerName")])]),a("tr",[a("td",[t._v("AWS/NetworkELB")]),a("td",[t._v("LoadBalancer")])]),a("tr",[a("td",[t._v("AWS/ElasticTranscoder")]),a("td",[t._v("PipelineId")])]),a("tr",[a("td",[t._v("AWS/ElastiCache")]),a("td",[t._v("CacheClusterId")])]),a("tr",[a("td",[t._v("AWS/ES")]),a("td",[t._v("ClientId")])]),a("tr",[a("td",[t._v("AWS/ElasticMapReduce")]),a("td",[t._v("JobId")])]),a("tr",[a("td",[t._v("AWS/GameLift")]),a("td",[t._v("FleetId")])]),a("tr",[a("td",[t._v("AWS/Inspector")]),a("td",[t._v("???")])]),a("tr",[a("td",[t._v("AWS/IoT")]),a("td",[t._v("RuleName")])]),a("tr",[a("td",[t._v("AWS/KMS")]),a("td",[t._v("KeyId")])]),a("tr",[a("td",[t._v("AWS/KinesisAnalytics")]),a("td",[t._v("Flow")])]),a("tr",[a("td",[t._v("AWS/Firehose")]),a("td",[t._v("DeliveryStreamName")])]),a("tr",[a("td",[t._v("AWS/Kinesis")]),a("td",[t._v("StreamName")])]),a("tr",[a("td",[t._v("AWS/KinesisVideo")]),a("td",[t._v("StreamName")])]),a("tr",[a("td",[t._v("AWS/Lambda")]),a("td",[t._v("FunctionName")])]),a("tr",[a("td",[t._v("AWS/Lex")]),a("td",[t._v("BotName")])]),a("tr",[a("td",[t._v("AWS/ML")]),a("td",[t._v("MLModelId")])]),a("tr",[a("td",[t._v("AWS/OpsWorks")]),a("td",[t._v("InstanceId")])]),a("tr",[a("td",[t._v("AWS/Polly")]),a("td",[t._v("Operation")])]),a("tr",[a("td",[t._v("AWS/Redshift")]),a("td",[t._v("NodeID")])]),a("tr",[a("td",[t._v("AWS/RDS")]),a("td",[t._v("DBInstanceIdentifier")])]),a("tr",[a("td",[t._v("AWS/Route53")]),a("td",[t._v("HealthCheckId")])]),a("tr",[a("td",[t._v("AWS/SageMaker")]),a("td",[t._v("Host")])]),a("tr",[a("td",[t._v("AWS/DDoSProtection")]),a("td")]),a("tr",[a("td",[t._v("AWS/SES")]),a("td")]),a("tr",[a("td",[t._v("AWS/SNS")]),a("td",[t._v("Application")])]),a("tr",[a("td",[t._v("AWS/SQS")]),a("td",[t._v("QueueName")])]),a("tr",[a("td",[t._v("AWS/S3")]),a("td",[t._v("BucketName")])]),a("tr",[a("td",[t._v("AWS/SWF")]),a("td",[t._v("Domain")])]),a("tr",[a("td",[t._v("AWS/States")]),a("td",[t._v("*arn")])]),a("tr",[a("td",[t._v("AWS/StorageGateway")]),a("td",[t._v("GatewayName")])]),a("tr",[a("td",[t._v("AWS/NATGateway")]),a("td",[t._v("NatGatewayId")])]),a("tr",[a("td",[t._v("AWS/VPN")]),a("td",[t._v("VpnId")])]),a("tr",[a("td",[t._v("WAF")]),a("td",[t._v("Rule")])]),a("tr",[a("td",[t._v("AWS/WorkSpaces")]),a("td",[t._v("WorkspaceId")])]),a("tr",[a("td",[t._v("AWS/AmazonMQ")]),a("td",[t._v("Topic")])]),a("tr",[a("td",[t._v("AWS/TrustedAdvisor")]),a("td",[t._v("ServiceName")])])])])}],r=a(0),i=Object(r.a)({},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content"},[t._m(0),t._m(1),t._m(2),t._m(3),a("p",[t._v("The AWS job stores markers for each CloudWatch metric so that API requests are incremental and load only the most recent data. These markers allow the job to build optimized queries and to avoid data gaps in case of network outages.")]),t._m(4),a("p",[t._v("When an AWS job is started for the first time, it will load available historical data from CloudWatch, available for up to 2 weeks.")]),t._m(5),t._m(6),a("p",[t._v("You can configure the AWS job to collect metrics for all or a subset of namespaces. To minimize the number of API queries, choose to collect data only for AWS services that you're actually using.")]),a("p",[t._v("Available namespaces:")]),t._m(7),t._m(8),a("p",[t._v("The CloudWatch metrics are stored in ATSD using the following naming convention:")]),t._m(9),a("p",[t._v("The composite metric name is normalized by replacing slash and whitespace symbols with underscores.")]),t._m(10),a("p",[t._v("For each metric, the AWS job retrieves the following period statistics:")]),t._m(11),a("p",[t._v("The AWS statistics are stored in ATSD as metrics which means that ATSD can compute aggregate statistics on top of AWS statistics.")]),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),a("ul",[a("li",[t._v("Create a read-only "),a("router-link",{attrs:{to:"aws-iam.html"}},[t._v("IAM account")]),t._v(" for querying CloudWatch statistics.")],1),t._m(19),a("li",[t._v("Specify access and secret keys.")]),t._m(20),a("li",[t._v("Validate the credentials and save the job if there are no errors.")])]),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),t._m(31),t._m(32),t._m(33),t._m(34),t._m(35),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),a("p",[t._v("The primary dimension determines entity name in ATSD.")]),t._m(41)])},s,!1,null,null,null);e.default=i.exports}}]);