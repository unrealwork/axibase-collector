<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Collector | NGINX PLUS Web Server Monitoring</title>
    <meta name="description" content="User manual and API reference for AxibaseÂ® Time Series Database">
    <link rel="shortcut icon" href="/docs/axibase-collector/favicon.ico">
    
    <link rel="stylesheet" href="/docs/axibase-collector/assets/css/117.styles.518f94bf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/docs/axibase-collector/" class="home-link router-link-active"><img src="/docs/axibase-collector/images/axibase_logo_green.gif" class="logo"><span class="site-name can-hide">
      Collector
    </span></a><div class="links"><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Jobs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/aws.html" class="nav-link">AWS</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/docker.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/file.html" class="nav-link">File</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/http.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/icmp.html" class="nav-link">ICMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc.html" class="nav-link">JDBC</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jmx.html" class="nav-link">JMX</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/json.html" class="nav-link">JSON</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka.html" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/ovpm.html" class="nav-link">OVPM</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/pi.html" class="nav-link">PI</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/snmp.html" class="nav-link">SNMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/socrata.html" class="nav-link">Socrata</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/tcp.html" class="nav-link">TCP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Data Sources</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc-data-source.html" class="nav-link">Database</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/atsd-server-connection.html#http-pool" class="nav-link">HTTP Pool</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka-consumer.html" class="nav-link">Kafka Consumer</a></li></ul></div></div><div class="nav-item"><a href="/docs/axibase-collector/#examples" class="nav-link">Examples</a></div><!----></nav><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Jobs</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/aws.html" class="nav-link">AWS</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/docker.html" class="nav-link">Docker</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/file.html" class="nav-link">File</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/http.html" class="nav-link">HTTP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/icmp.html" class="nav-link">ICMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc.html" class="nav-link">JDBC</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jmx.html" class="nav-link">JMX</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/json.html" class="nav-link">JSON</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka.html" class="nav-link">Kafka</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/ovpm.html" class="nav-link">OVPM</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/pi.html" class="nav-link">PI</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/snmp.html" class="nav-link">SNMP</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/socrata.html" class="nav-link">Socrata</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/tcp.html" class="nav-link">TCP</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Data Sources</span><span class="arrow right"></span></a><ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/jdbc-data-source.html" class="nav-link">Database</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/atsd-server-connection.html#http-pool" class="nav-link">HTTP Pool</a></li><li class="dropdown-item"><!----><a href="/docs/axibase-collector/jobs/kafka-consumer.html" class="nav-link">Kafka Consumer</a></li></ul></div></div><div class="nav-item"><a href="/docs/axibase-collector/#examples" class="nav-link">Examples</a></div><!----></nav><ul class="sidebar-links"><li><a href="/docs/axibase-collector/" class="sidebar-link">Axibase Collector</a></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Installation</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Updating</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Administration</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Job's Configuration</span><span class="arrow right"></span></p><!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Automation</span><span class="arrow right"></span></p><!----></div></li></ul></div><div class="page"><div class="content"><h1 id="nginx-plus-web-server-monitoring"><a href="#nginx-plus-web-server-monitoring" aria-hidden="true" class="header-anchor">#</a> NGINX PLUS Web Server Monitoring</h1><h2 id="overview"><a href="#overview" aria-hidden="true" class="header-anchor">#</a> Overview</h2><p>This document describes how to collect various metrics from an NGINX PLUS web server for long-term retention and monitoring in the Axibase Time Series Database.</p><p>The periodic data collection can be organized in several ways:</p><ul><li>Configuring Axibase Collector JSON job to periodically poll server's status page and upload obtained data for parsing in ATSD.</li><li>Using <a href="../../../jobs/examples/nginx-plus/axibase-nginx-plus-collector/src">axibase_nginx_plus_collector</a> python script along with an OS scheduler. This way is described at <a href="../../../jobs/examples/nginx-plus/axibase-nginx-plus-collector">axibase_nginx_plus_collector page</a>.</li></ul><p>The document will provide instructions for the first way of configuring.</p><h2 id="requirements"><a href="#requirements" aria-hidden="true" class="header-anchor">#</a> Requirements</h2><ul><li>NGINX PLUS server with <a href="http://nginx.org/en/docs/http/ngx_http_status_module.html" target="_blank" rel="noopener noreferrer">ngx_http_status_module</a> enabled.</li><li><a href="/docs/axibase-collector/" class="router-link-active">Axibase Collector</a> for scheduled polling of the NGINX status page.</li><li><a href="https://axibase.com/docs/atsd/installation/" target="_blank" rel="noopener noreferrer">Axibase Time Series Database</a> as a centralized data repository.</li></ul><h2 id="configure-a-job-in-axibase-collector"><a href="#configure-a-job-in-axibase-collector" aria-hidden="true" class="header-anchor">#</a> Configure a job in Axibase Collector</h2><p>Axibase Collector will poll the NGINX PLUS status page every 5 seconds, build network commands, and send them to ATSD.</p><p>Log in to Axibase Collector web interface.</p><h3 id="create-item-list-for-nginx-plus-servers"><a href="#create-item-list-for-nginx-plus-servers" aria-hidden="true" class="header-anchor">#</a> Create Item List for NGINX PLUS servers</h3><ul><li>Open the <strong>Collections:Item Lists</strong> page.</li><li>Add a new TEXT <a href="/docs/axibase-collector/collections.html">Item List</a> named <strong>nginx-plus-servers</strong> containing DNS names or IP addresses of the monitored NGINX PLUS servers, one server per line. Make sure that each server on the list is accessible on the specified protocol and port and exposes the status page on the same path <code>/status</code>. If the protocols and ports are different, move the entire url to the list and set Path field equal to the<code>${ITEM}</code> placeholder.</li><li><strong>Save</strong> the list.</li></ul><p><img src="/docs/axibase-collector/assets/img/ngp_item_list.2ac9dd37.png" alt="Server list example"></p><h3 id="import-a-job"><a href="#import-a-job" aria-hidden="true" class="header-anchor">#</a> Import a job</h3><ul><li>Import the <a href="./configs/nginx-plus-collector-job.xml">nginx-plus-collector-job.xml</a> job on the <strong>Jobs:Import</strong> page.</li><li>Open the <code>nginx-plus-statistics</code> JSON job.</li><li>If the 'Storage' drop-down is set to <code>None</code>, select the target ATSD server.</li><li>Set Status to Enabled.</li><li><strong>Save</strong> the job.</li></ul><p>The job consists of several settings blocks, each of which is responsible for processing specific data from the NGINX PLUS status page. Each block forms special <code>series</code> and <code>property</code> commands for ATSD depending on what is being processed by the block. For example, the first settings block is responsible for processing general information about an NGINX PLUS Server. This block will fetch different metrics about <em>connection</em>, <em>ssl handshakes</em>, <em>requests</em>, <em>respawned processses</em> of the server and get its general properties such as <em>address</em>, <em>nginx_version</em>, <em>load_timestamp</em>, etc.
<img src="/docs/axibase-collector/assets/img/ngp_first_settings_block.25a9bcae.png" alt="First settings block">
The result <code>series</code> and <code>property</code>commands formed by the block will look as shown below:</p><pre class="language-text"><code>series e:demo.nginx.com d:2016-08-02T10:35:46.608Z m:nginx-plus.connections.accepted=40750818 m:nginx-plus.connections.dropped=0 m:nginx-plus.requests.current=11 m:nginx-plus.ssl.handshakes=45602 m:nginx-plus.connections.idle=34 m:nginx-plus.requests.total=85010375 m:nginx-plus.processes.respawned=0 m:nginx-plus.ssl.session_reuses=7504 m:nginx-plus.connections.active=11 m:nginx-plus.ssl.handshakes_failed=6641
property t:nginx_info e:demo.nginx.com d:2016-08-02T10:35:46.608Z k:address=206.251.255.64 v:nginx_version=1.9.13 v:pid=12121 v:load_timestamp=1469872800422 v:generation=17 v:version=6
</code></pre><p>Other settings blocks in the provided <a href="./configs/nginx-plus-collector-job.xml">collector job configuration file</a> can be briefly described by the following statements:</p><ul><li><em>Second</em> settings block collects information about all peers of upstreams and <code>stream.upstreams</code>.</li><li><em>Third</em> settings block collects all information about server zones and upstreams, along with general properties of all caches of the server.</li><li><em>Fourth</em> settings block is responsible for getting all information about <code>stream.server_zones</code>.</li><li><em>Fifth</em> settings block collects more detailed data about all the caches of the server.</li></ul><h3 id="validate-data-availability"><a href="#validate-data-availability" aria-hidden="true" class="header-anchor">#</a> Validate Data Availability</h3><ul><li>Open the <code>nginx-plus-status</code> configuration in the <code>nginx-plus-statistics</code> job.</li><li>Click Test to verify processing.</li></ul><p><img src="data:image/png;base64,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" alt="NGINX test"></p><ul><li>Log in to the ATSD web interface.</li><li>Open the Metrics tab and apply the <code>nginx-plus*</code> name mask to view NGINX metrics received by ATSD.</li><li>Click on Series link and check that metrics are present for each server in the <strong>nginx-plus-servers</strong> list.</li></ul><p><img src="/docs/axibase-collector/assets/img/ngp_verify_metrics.f5661419.png" alt="NGINX metrics"></p><h2 id="viewing-data-in-atsd"><a href="#viewing-data-in-atsd" aria-hidden="true" class="header-anchor">#</a> Viewing Data in ATSD</h2><h2 id="metrics"><a href="#metrics" aria-hidden="true" class="header-anchor">#</a> Metrics</h2><p>List of collected <a href="/docs/axibase-collector/jobs/examples/nginx-plus/nginx-plus-server-metrics.html">NGINX PLUS server metrics</a>.</p><h2 id="entity-group"><a href="#entity-group" aria-hidden="true" class="header-anchor">#</a> Entity Group</h2><ul><li>Open <strong>Admin:Entity Groups</strong>, click the [Import] button, and upload <a href="./configs/nginx-plus-entity-group.xml">nginx_plus_entity_group.xml</a>.</li><li>Select the imported <code>nginx-plus-servers</code> group.</li><li>Verify that the group contains your NGINX servers.</li></ul><h2 id="portal"><a href="#portal" aria-hidden="true" class="header-anchor">#</a> Portal</h2><ul><li>Open <strong>Configuration: Portals</strong>, click the [Import] button, and upload <a href="./configs/nginx-plus-portal.xml">nginx-plus-portal.xml</a>.</li><li>Click the <strong>Assign</strong> link and associate the portal with the entity group you created earlier.</li><li>Open <em>Entity</em> tabs, find the NGINX PLUS servers you would like to see information about, and click on its portal icon.</li></ul><p><img src="/docs/axibase-collector/assets/img/ngp_portal_selection.667fdfa2.png" alt><a href="http://apps.axibase.com/chartlab/0adf6705" target="_blank" rel="noopener noreferrer">NGINX PLUS Status portal example</a></p><h2 id="notifications"><a href="#notifications" aria-hidden="true" class="header-anchor">#</a> Notifications</h2><p>You can monitor key NGINX PLUS statistics by creating a rule in ATSD rule engine to send an email notification in case of abnormal conditions.</p><p>For example, you can send an email if the average active connections* count over the last 15 minutes on a target NGINX PLUS server drops below the specified threshold.</p><h3 id="setting-up-mail-client"><a href="#setting-up-mail-client" aria-hidden="true" class="header-anchor">#</a> Setting up Mail Client</h3><ul><li>Configure <a href="https://axibase.com/docs/atsd/administration/mail-client.html" target="_blank" rel="noopener noreferrer">Mail Client</a>.</li></ul><h3 id="import-rules"><a href="#import-rules" aria-hidden="true" class="header-anchor">#</a> Import rules</h3><ul><li>Download an <a href="./configs/nginx-plus-rules.xml">xml file</a> containing the rules.</li><li>Open the <strong>Configuration: Rules</strong> page.</li><li>Click <em>Import</em> and attach the <code>nginx-plus-rules.xml</code> file.</li><li>Open 'created rules' in the Rule Editor and change recipient address on the <em>Email Notifications</em> tab.</li><li>These rules will automatically apply to all NGINX PLUS servers monitored by Axibase Collector.</li></ul><p>The following rules are provided in the <code>nginx_plus_rules.xml</code> file:</p><table><thead><tr><th style="text-align:center"><strong>Rule</strong></th><th style="text-align:left"><strong>Description</strong></th></tr></thead><tbody><tr><td style="text-align:center">nginx_plus_respawned_proc_increase</td><td style="text-align:left">Raise an alert when an NGINX PLUS server's total number of abnormally terminated and respawned child processes increases.</td></tr><tr><td style="text-align:center">nginx_plus_fails_high</td><td style="text-align:left">Raise an alert when an NGINX PLUS server's total number of unsuccessful attempts to communicate with some peer server is high.</td></tr><tr><td style="text-align:center">nginx_plus_droppped_high</td><td style="text-align:left">Raise an alert when an NGINX PLUS server dropped sufficient amount of connections.</td></tr><tr><td style="text-align:center">nginx_plus_downtime_long</td><td style="text-align:left">Raise an alert indicating NGINX PLUS server's peer is in &quot;unavail&quot; and &quot;unhealthy&quot; states during a specified period of time (default: 15 minutes).</td></tr><tr><td style="text-align:center">nginx_plus_active_connection_low</td><td style="text-align:left">Raise an alert when an NGINX PLUS server average active connection count is below the specified threshold (default: 10) over the last 15 minutes.</td></tr><tr><td style="text-align:center">nginx_plus_active_connection_heartbeat</td><td style="text-align:left">Raise an alert when status page statistics are no longer being received by ATSD. Check that the server is reachable and Axibase Collector job is running.</td></tr></tbody></table><p>To create your own rules, refer to <a href="https://axibase.com/docs/atsd/rule-engine/" target="_blank" rel="noopener noreferrer">Rule Engine documentation</a>.</p></div><div class="content edit-link"><a href="https://github.com/axibase/axibase-collector/edit/master//jobs/examples/nginx-plus/README.md" target="_blank" rel="noopener noreferrer">Help us improve this page!</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><!----></div></div></div>
    <script src="/docs/axibase-collector/assets/js/55.7599575e.js" defer></script><script src="/docs/axibase-collector/assets/js/app.2470ced7.js" defer></script>
  </body>
</html>
