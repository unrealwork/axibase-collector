(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{350:function(E,N,T){"use strict";T.r(N);var I=T(0),_=Object(I.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var E=this,N=E.$createElement,T=E._self._c||N;return T("div",{staticClass:"content"},[T("h1",{attrs:{id:"vmware-data-queries"}},[T("a",{staticClass:"header-anchor",attrs:{href:"#vmware-data-queries","aria-hidden":"true"}},[E._v("#")]),E._v(" VMware Data Queries")]),T("ul",[T("li",[E._v("Cluster Metrics Query:")])]),T("pre",{pre:!0,attrs:{class:"language-text"}},[T("code",[E._v("SELECT st.SAMPLE_TIME, pe.NAME AS ENTITY_NAME, (sd.GROUP_NAME + '.' + sd.NAME) AS METRIC,\nCOUNT(hs.STAT_VAL) AS \"cnt\",\nAVG(CASE sd.UNIT WHEN 'percent' THEN hs.STAT_VAL/100.0 ELSE hs.STAT_VAL END) AS \"avg\",\nSUM(CASE sd.UNIT WHEN 'percent' THEN hs.STAT_VAL/100.0 ELSE hs.STAT_VAL END) AS \"sum\",\nMAX(CASE sd.UNIT WHEN 'percent' THEN hs.STAT_VAL/100.0 ELSE hs.STAT_VAL END) AS \"max\",\nMIN(CASE sd.UNIT WHEN 'percent' THEN hs.STAT_VAL/100.0 ELSE hs.STAT_VAL END) AS \"min\"\nFROM dbo.VPX_SAMPLE_TIME1 AS st (NOLOCK)\nINNER JOIN dbo.VPX_HIST_STAT1 AS hs (NOLOCK)\nINNER JOIN dbo.VPX_STAT_COUNTER AS sc (NOLOCK) ON hs.COUNTER_ID = sc.COUNTER_ID\nINNER JOIN dbo.VPX_STAT_DEF AS sd (NOLOCK) ON sc.STAT_ID = sd.ID\nINNER JOIN dbo.VPX_DEVICE AS d (NOLOCK)\nLEFT OUTER JOIN dbo.VPX_STAT_DEV_TYPE AS sdt (NOLOCK) ON d.DEVICE_ID = sdt.DEVICE_ID\nLEFT OUTER JOIN dbo.VPX_STAT_DEV_TYPE_DEF AS sdtd (NOLOCK)\nON sdt.DEVICE_TYPE_ID = sdtd.DEVICE_TYPE_ID ON sc.DEVICE_ID = ISNULL(d.DEVICE_ID, 1)\nON st.TIME_ID = hs.TIME_ID\nINNER JOIN dbo.VPX_STAT_ID AS si (NOLOCK) ON sc.ENTITY_ID = si.ID\nINNER JOIN VPXV_ENTITY_MOID em (NOLOCK) on si.MOID = em.MOID\nINNER JOIN VPXV_ENTITY e (NOLOCK) on em.ENTITYID = e.id\nINNER JOIN VPXV_ENTITY pe (NOLOCK) on e.parent_id = pe.id\nWHERE sd.GROUP_NAME NOT IN ('sys', 'rescpu') AND st.SAMPLE_TIME > DATEADD(MINUTE, -10, ?)\nAND ISNULL(d.DEVICE_ID, 1) = 1 AND e.PARENT_ENTITY_TYPE = 'CLUSTER_COMPUTE_RESOURCE'\nAND sd.UNIT != 'millisecond'\nGROUP BY pe.NAME, st.SAMPLE_TIME, sd.GROUP_NAME, sd.NAME, sd.UNIT\nHAVING COUNT(hs.STAT_VAL) > 1\nORDER BY SAMPLE_TIME\n")])]),T("ul",[T("li",[E._v("Host Metrics Query:")])]),T("pre",{pre:!0,attrs:{class:"language-text"}},[T("code",[E._v("SELECT st.SAMPLE_TIME, e.NAME AS ENTITY_NAME, LOWER(e.ENTITY_TYPE) AS ENTITY_TYPE,\n(sd.GROUP_NAME + '.' + sd.NAME) AS METRIC, d.DEVICE_NAME,\nCASE sd.UNIT WHEN 'percent' THEN hs.STAT_VAL/100.0 ELSE hs.STAT_VAL END AS STAT_VALUE\nFROM dbo.VPX_SAMPLE_TIME1 AS st (NOLOCK)\nINNER JOIN dbo.VPX_HIST_STAT1 AS hs (NOLOCK)\nINNER JOIN dbo.VPX_STAT_COUNTER AS sc (NOLOCK) ON hs.COUNTER_ID = sc.COUNTER_ID\nINNER JOIN dbo.VPX_STAT_DEF AS sd (NOLOCK) ON sc.STAT_ID = sd.ID\nINNER JOIN dbo.VPX_DEVICE AS d (NOLOCK)\nLEFT OUTER JOIN dbo.VPX_STAT_DEV_TYPE AS sdt (NOLOCK) ON d.DEVICE_ID = sdt.DEVICE_ID\nLEFT OUTER JOIN dbo.VPX_STAT_DEV_TYPE_DEF AS sdtd (NOLOCK)\nON sdt.DEVICE_TYPE_ID = sdtd.DEVICE_TYPE_ID ON sc.DEVICE_ID = ISNULL(d.DEVICE_ID, 1)\nON st.TIME_ID = hs.TIME_ID\nINNER JOIN dbo.VPX_STAT_ID AS si (NOLOCK) ON sc.ENTITY_ID = si.ID\nINNER JOIN VPXV_ENTITY_MOID em (NOLOCK) on si.MOID = em.MOID\nINNER JOIN VPXV_ENTITY e (NOLOCK) on em.ENTITYID = e.id\nWHERE sd.GROUP_NAME != 'sys' AND e.PARENT_ID IS NOT NULL AND e.ENTITY_TYPE != 'VM' AND st.SAMPLE_TIME > DATEADD(MINUTE, -10, ?)\nORDER BY st.SAMPLE_TIME\n")])]),T("ul",[T("li",[E._v("VM Metrics Query:")])]),T("pre",{pre:!0,attrs:{class:"language-text"}},[T("code",[E._v("SELECT st.SAMPLE_TIME, e.NAME AS ENTITY_NAME, LOWER(e.ENTITY_TYPE) AS ENTITY_TYPE,\n(sd.GROUP_NAME + '.' + sd.NAME) AS METRIC, d.DEVICE_NAME,\nCASE sd.UNIT WHEN 'percent' THEN hs.STAT_VAL/100.0 ELSE hs.STAT_VAL END AS STAT_VALUE\nFROM dbo.VPX_SAMPLE_TIME1 AS st (NOLOCK)\nINNER JOIN dbo.VPX_HIST_STAT1 AS hs (NOLOCK)\nINNER JOIN dbo.VPX_STAT_COUNTER AS sc (NOLOCK) ON hs.COUNTER_ID = sc.COUNTER_ID\nINNER JOIN dbo.VPX_STAT_DEF AS sd (NOLOCK) ON sc.STAT_ID = sd.ID\nINNER JOIN dbo.VPX_DEVICE AS d (NOLOCK)\nLEFT OUTER JOIN dbo.VPX_STAT_DEV_TYPE AS sdt (NOLOCK) ON d.DEVICE_ID = sdt.DEVICE_ID\nLEFT OUTER JOIN dbo.VPX_STAT_DEV_TYPE_DEF AS sdtd (NOLOCK)\nON sdt.DEVICE_TYPE_ID = sdtd.DEVICE_TYPE_ID ON sc.DEVICE_ID = ISNULL(d.DEVICE_ID, 1)\nON st.TIME_ID = hs.TIME_ID\nINNER JOIN dbo.VPX_STAT_ID AS si (NOLOCK) ON sc.ENTITY_ID = si.ID\nINNER JOIN VPXV_ENTITY_MOID em (NOLOCK) on si.MOID = em.MOID\nINNER JOIN VPXV_ENTITY e (NOLOCK) on em.ENTITYID = e.id\nWHERE sd.GROUP_NAME != 'sys' AND e.PARENT_ID IS NOT NULL AND e.ENTITY_TYPE = 'VM' AND st.SAMPLE_TIME > DATEADD(MINUTE, -10, ?)\nORDER BY st.SAMPLE_TIME\n")])]),T("ul",[T("li",[E._v("Cluster Properties Query:")])]),T("pre",{pre:!0,attrs:{class:"language-text"}},[T("code",[E._v("SELECT pe.NAME AS CLUSTER, vms.NAME as VM, e.NAME AS HOST, vms.POWER_STATE,\nvms.MEM_SIZE_MB, vms.NUM_VCPU, vms.DESCRIPTION\nFROM VPXV_ENTITY e (NOLOCK)\nINNER JOIN VPXV_ENTITY pe (NOLOCK) on e.parent_id = pe.id\nINNER JOIN VPXV_VMS vms (NOLOCK) on vms.hostid = e.id\nWHERE e.PARENT_ENTITY_TYPE = 'CLUSTER_COMPUTE_RESOURCE' AND e.ENTITY_TYPE = 'HOST'\nAND VMS.POWER_STATE = 'On'\n")])]),T("ul",[T("li",[E._v("Resource Pool Properties Query:")])]),T("pre",{pre:!0,attrs:{class:"language-text"}},[T("code",[E._v("SELECT C.NAME, R.ALLOCATED_CPU, ALLOCATED_VM_CPU, AVAILABLE_POOL_CPU, AVAILABLE_VM_CPU,\nALLOCATED_MEM, ALLOCATED_VM_MEM, AVAILABLE_POOL_MEM,\nAVAILABLE_VM_MEM, CURRENT_CPU, CURRENT_MEM, OVERALL_STATUS\nFROM VPXV_RESOURCE_POOL R (NOLOCK) INNER JOIN VPXV_COMPUTE_RESOURCE C (NOLOCK) ON R.PARENT_ID = C.RESOURCEPOOLID\n")])]),T("ul",[T("li",[E._v("Host Properties Query:")])]),T("pre",{pre:!0,attrs:{class:"language-text"}},[T("code",[E._v("SELECT NAME AS ESXHOSTNAME, * FROM VPXV_HOSTS\n")])]),T("ul",[T("li",[E._v("VM Properties Query:")])]),T("pre",{pre:!0,attrs:{class:"language-text"}},[T("code",[E._v("SELECT REPLACE(NAME, ' ', '_') AS VMNAME, * FROM VPXV_VMS\n")])])])}],!1,null,null,null);N.default=_.exports}}]);