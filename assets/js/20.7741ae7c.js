(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{337:function(e,a,t){"use strict";t.r(a);var s=t(0),r=Object(s.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"enabling-jmx-in-java-applications"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#enabling-jmx-in-java-applications","aria-hidden":"true"}},[e._v("#")]),e._v(" Enabling JMX in Java Applications")]),t("h2",{attrs:{id:"examples"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#examples","aria-hidden":"true"}},[e._v("#")]),e._v(" Examples")]),t("h3",{attrs:{id:"apache-activemq-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#apache-activemq-server","aria-hidden":"true"}},[e._v("#")]),e._v(" Apache ActiveMQ Server")]),t("h4",{attrs:{id:"reference-information"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#reference-information","aria-hidden":"true"}},[e._v("#")]),e._v(" Reference Information")]),t("ul",[t("li",[e._v("Configuring JMX in ActiveMQ: "),t("a",{attrs:{href:"http://activemq.apache.org/jmx.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("activemq.apache.org/jmx.html")])])]),t("h4",{attrs:{id:"configure-jmx-properties"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#configure-jmx-properties","aria-hidden":"true"}},[e._v("#")]),e._v(" Configure JMX properties")]),t("ul",[t("li",[e._v("Change to ActiveMQ installation directory:")])]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("cd /opt/apache-activemq-5.13.1\n")])]),t("ul",[t("li",[e._v("Modify JMX settings in the ActiveMQ JVM launch options. "),t("br"),e._v("Search for the "),t("code",[e._v("ACTIVEMQ_SUNJMX_START")]),e._v(" setting and change it as specified below.")])]),t("h5",{attrs:{id:"activemq-5-11-x-and-later"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#activemq-5-11-x-and-later","aria-hidden":"true"}},[e._v("#")]),e._v(" ActiveMQ 5.11.x and later")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("vi ./bin/env\n")])]),t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote"')]),e._v("\n"),t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.port=1090"')]),e._v("\n"),t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.rmi.port=1090"')]),e._v("\n"),t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.ssl=false"')]),e._v("\n"),t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"$ACTIVEMQ_SUNJMX_START -Djava.rmi.server.hostname=activemq_hostname"')]),e._v("\n"),t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.password.file=${ACTIVEMQ_CONF}/jmx.password"')]),e._v("\n"),t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"$ACTIVEMQ_SUNJMX_START -Dcom.sun.management.jmxremote.access.file=${ACTIVEMQ_CONF}/jmx.access"')]),e._v("\n")])]),t("h5",{attrs:{id:"activemq-5-10-x-and-earlier"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#activemq-5-10-x-and-earlier","aria-hidden":"true"}},[e._v("#")]),e._v(" ActiveMQ 5.10.x and earlier")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("vi ./bin/activemq\n")])]),t("pre",{pre:!0,attrs:{class:"language-properties"}},[t("code",[t("span",{attrs:{class:"token attr-name"}},[e._v("ACTIVEMQ_SUNJMX_START")]),t("span",{attrs:{class:"token punctuation"}},[e._v("=")]),t("span",{attrs:{class:"token attr-value"}},[e._v('"-Dcom.sun.management.jmxremote \\\n   -Dcom.sun.management.jmxremote.port=1090 \\\n   -Dcom.sun.management.jmxremote.rmi.port=1090 \\\n   -Dcom.sun.management.jmxremote.ssl=false \\\n   -Djava.rmi.server.hostname=activemq_hostname \\\n   -Dcom.sun.management.jmxremote.password.file=${ACTIVEMQ_BASE}/conf/jmx.password \\\n   -Dcom.sun.management.jmxremote.access.file=${ACTIVEMQ_BASE}/conf/jmx.access"')]),e._v("\n")])]),t("blockquote",[t("p",[e._v("Replace "),t("code",[e._v("activemq_hostname")]),e._v(" with the full hostname or IP address of the ActiveMQ server.\nThis should be the same hostname that Axibase Collector will be using when connecting to the ActiveMQ server.")])]),t("p",[e._v("The result should be as shown in the image below:")]),t("p",[t("img",{attrs:{src:"https://axibase.com/wp-content/uploads/2016/03/very_new_screen.png",alt:"SUN_JMX_START_IMAGE"}})]),t("h4",{attrs:{id:"setup-jmx-user-credentials"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setup-jmx-user-credentials","aria-hidden":"true"}},[e._v("#")]),e._v(" Setup JMX User Credentials")]),t("p",[e._v("Change to "),t("code",[e._v("./conf")]),e._v(" directory.")]),t("p",[e._v("Add/edit the "),t("code",[e._v("jmx.access")]),e._v(" and "),t("code",[e._v("jmx.password")]),e._v(" files as follows.")]),t("p",[e._v("Make sure the owner of these files is the same as ActiveMQ user.")]),t("p",[t("code",[e._v("jmx.access")]),e._v(":")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('# The "monitorRole" role has readonly access.\nmonitorRole readonly\n')])]),t("p",[t("code",[e._v("jmx.password")]),e._v(":")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('# The "monitorRole" role has password "abc123".\nmonitorRole abc123\n')])]),t("h4",{attrs:{id:"secure-password-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#secure-password-file","aria-hidden":"true"}},[e._v("#")]),e._v(" Secure Password File")]),t("p",[e._v("Secure access to the  "),t("code",[e._v("jmx.password")]),e._v(" file by restricting permissions:")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("chmod -v 0600 ./conf/jmx.password\n")])]),t("h4",{attrs:{id:"restart-activemq-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#restart-activemq-server","aria-hidden":"true"}},[e._v("#")]),e._v(" Restart ActiveMQ Server")]),t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("./bin/activemq stop\n./bin/activemq start\n")])])])}],!1,null,null,null);a.default=r.exports}}]);